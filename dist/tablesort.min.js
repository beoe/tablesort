/*!
 * tablesort v5.4.2 (2023-11-06)
 * http://tristen.ca/tablesort/demo/
 * Copyright (c) 2023 ; Licensed MIT
*/
function Tablesort(t,e){if(!(this instanceof Tablesort))return new Tablesort(t,e);if(!t||"TABLE"!==t.tagName)throw new Error("Element must be a table");this.init(t,e||{})}var sortOptions=[],createEvent=function(t){var e;return window.CustomEvent&&"function"==typeof window.CustomEvent?e=new CustomEvent(t):(e=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!1,void 0),e},getInnerText=function(t,e){return t.getAttribute(e.sortAttribute||"data-sort")||t.textContent||t.innerText||""},caseInsensitiveSort=function(t,e){return(t=t.trim().toLowerCase())===(e=e.trim().toLowerCase())?0:t<e?1:-1},getCellByKey=function(t,e){return[].slice.call(t).find(function(t){return t.getAttribute("data-sort-column-key")===e})},stabilize=function(n,o){return function(t,e){var r=n(t.td,e.td);return 0===r?o?e.index-t.index:t.index-e.index:r}},cleanNumber=(Tablesort.extend=function(t,e,r){if("function"!=typeof e||"function"!=typeof r)throw new Error("Pattern and sort must be a function");sortOptions.push({name:t,pattern:e,sort:r})},Tablesort.prototype={init:function(t,e){var r,n,o,s=this;if(s.table=t,s.thead=!1,s.options=e,t.rows&&0<t.rows.length)if(t.tHead&&0<t.tHead.rows.length){for(a=0;a<t.tHead.rows.length;a++)if("thead"===t.tHead.rows[a].getAttribute("data-sort-method")){r=t.tHead.rows[a];break}r=r||t.tHead.rows[t.tHead.rows.length-1],s.thead=!0}else r=t.rows[0];if(r){function i(){s.current&&s.current!==this&&s.current.removeAttribute("aria-sort"),s.current=this,s.sortTable(this)}for(var a=0;a<r.cells.length;a++)(o=r.cells[a]).setAttribute("role","columnheader"),"none"!==o.getAttribute("data-sort-method")&&(o.tabindex=0,o.addEventListener("click",i,!1),null!==o.getAttribute("data-sort-default")&&(n=o));n&&(s.current=n,s.sortTable(n))}},sortTable:function(t,e){var r=this,n=t.getAttribute("data-sort-column-key"),o=t.cellIndex,s=caseInsensitiveSort,i="",a=[],l=r.thead?0:1,u=t.getAttribute("data-sort-method"),d=t.getAttribute("aria-sort");if(r.table.dispatchEvent(createEvent("beforeSort")),e||(d="ascending"===d||"descending"!==d&&r.options.descending?"descending":"ascending",t.setAttribute("aria-sort",d)),!(r.table.rows.length<2)){if(!u){for(;a.length<3&&l<r.table.tBodies[0].rows.length;)0<(i=(i=(b=n?getCellByKey(r.table.tBodies[0].rows[l].cells,n):r.table.tBodies[0].rows[l].cells[o])?getInnerText(b,r.options):"").trim()).length&&a.push(i),l++;if(!a)return}for(l=0;l<sortOptions.length;l++)if(i=sortOptions[l],u){if(i.name===u){s=i.sort;break}}else if(a.every(i.pattern)){s=i.sort;break}for(r.col=o,l=0;l<r.table.tBodies.length;l++){var c,b,f=[],h={},g=0,m=0;if(!(r.table.tBodies[l].rows.length<2)){for(c=0;c<r.table.tBodies[l].rows.length;c++)"none"===(i=r.table.tBodies[l].rows[c]).getAttribute("data-sort-method")?h[g]=i:(b=n?getCellByKey(i.cells,n):i.cells[r.col],f.push({tr:i,td:b?getInnerText(b,r.options):"",index:g})),g++;for("descending"===d?f.sort(stabilize(s,!0)):(f.sort(stabilize(s,!1)),f.reverse()),c=0;c<g;c++)h[c]?(i=h[c],m++):i=f[c-m].tr,r.table.tBodies[l].appendChild(i)}}r.table.dispatchEvent(createEvent("afterSort"))}},refresh:function(){void 0!==this.current&&this.sortTable(this.current,!0)}},function(t){return t.replace(/[^\-?0-9.]/g,"")}),compareNumber=function(t,e){return t=parseFloat(t),e=parseFloat(e),(t=isNaN(t)?0:t)-(e=isNaN(e)?0:e)};Tablesort.extend("number",function(t){return t.match(/^[-+]?[£\x24Û¢´€]?\d+\s*([,\.]\d{0,2})/)||t.match(/^[-+]?\d+\s*([,\.]\d{0,2})?[£\x24Û¢´€]/)||t.match(/^[-+]?(\d)*-?([,\.]){0,1}-?(\d)+([E,e][\-+][\d]+)?%?$/)},function(t,e){return t=cleanNumber(t),e=cleanNumber(e),compareNumber(e,t)}),module.exports=Tablesort;